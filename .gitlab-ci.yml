include:
  - project: 'swarm/swarmops/devops/ci/ci-templates'
    ref: v1.1.0
    file: '/nexus/package.yml'

stages:
  - build package
  - deploy package
  - check approve

variables:
  PACKAGE_TYPE: deb

build:
  stage: build package
  before_script:
    - export STRIPPED_VERSION="${VERSION#v}"
    - echo $STRIPPED_VERSION
  script:
    - apt install -y asciidoc
    - chmod -R 755 .
    - ./install.sh 
    - mv ./packages/deb/swarm-libnftnl-${STRIPPED_VERSION}-any.deb .
